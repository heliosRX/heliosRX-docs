(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{207:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"retrieving-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#retrieving-data"}},[t._v("#")]),t._v(" Retrieving data")]),t._v(" "),s("p",[t._v("There is two ways to retrieve data in heliosRX (and Firebase). Either as a\ncontiouns stream of data ("),s("code",[t._v("subscribe")]),t._v(") or as one time event ("),s("code",[t._v("fetch")]),t._v(").\nIn the first case data will continously be synced from Realtime Database.\nIn the second case data is only retrieved once and not synced any further.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("sync")]),t._v(" "),s("th",[t._v("fetch (same syntax)")]),t._v(" "),s("th",[s("em",[t._v("return type")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("list (collection)")]),t._v(" "),s("td",[s("code",[t._v("subscribeList")])]),t._v(" "),s("td",[s("code",[t._v("fetchList")])]),t._v(" "),s("td",[s("em",[s("code",[t._v("GenericList")])])])]),t._v(" "),s("tr",[s("td",[t._v("filtered list")]),t._v(" "),s("td",[s("code",[t._v("subscribeQuery")])]),t._v(" "),s("td",[s("code",[t._v("fetchQuery")])]),t._v(" "),s("td",[s("em",[s("code",[t._v("GenericList")])])])]),t._v(" "),s("tr",[s("td",[t._v("node (document)")]),t._v(" "),s("td",[s("code",[t._v("subscribeNode")])]),t._v(" "),s("td",[s("code",[t._v("fetchNode")])]),t._v(" "),s("td",[s("em",[s("code",[t._v("GenericModel")])])])])])]),t._v(" "),s("p",[t._v("Both subscribe and fetch exists for nodes (or documents) and lists (or collections)\nof data. A special case of a list is a query. A query returns a list that\nhas been filtered on the server according to certain criteria")]),t._v(" "),s("p",[t._v("While "),s("code",[t._v("subscribeList")]),t._v(" will return everything under the node "),s("code",[t._v("tasks")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/tasks/*  --\x3e  $models.task.subscribeList()\n")])])]),s("p",[s("code",[t._v("subscribeNode")]),t._v(" will only return one item:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/tasks/1  --\x3e  $models.task.subscribeNode(1)\n")])])]),t._v(" "),s("p",[s("code",[t._v("fetchList")]),t._v(" and "),s("code",[t._v("subscribeList")]),t._v(", "),s("code",[t._v("fetchQuery")]),t._v(" and "),s("code",[t._v("subscribeQuery")]),t._v(", "),s("code",[t._v("fetchNode")]),t._v(" and "),s("code",[t._v("subscribeNode")]),t._v(" have identical syntax and can be used interchangeably.")]),t._v(" "),s("h2",{attrs:{id:"working-with-lists"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-lists"}},[t._v("#")]),t._v(" Working with lists")]),t._v(" "),s("p",[t._v("One way to retrieve data is to define a new variable in the "),s("code",[t._v("this")]),t._v(" scope, during\nthe "),s("code",[t._v("created")]),t._v(" or "),s("code",[t._v("mounted")]),t._v(" lifecycle hooks:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" task_list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" task_list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// all tasks have been loaded")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("There is no need to define "),s("code",[t._v("task_list")]),t._v(" in "),s("code",[t._v("data()")]),t._v(" in order to make it reactive.\nReturn values of "),s("code",[t._v("subscribeNode")]),t._v(" / "),s("code",[t._v("subscribeList")]),t._v(" / "),s("code",[t._v("subscribeQuery")]),t._v(" are always reactive by themselves.")]),t._v(" "),s("p",[t._v("Another way is to return a "),s("code",[t._v("GenericList")]),t._v(" directly from a computed property:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  computed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task_list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("In both cases "),s("code",[t._v("task_list")]),t._v(" will be available in the template:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("task_list.$readyAll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{task_list.items}}\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("Some other useful properties you can use at this moment are:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Properties")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v(".items")])]),t._v(" "),s("td",[t._v("Object")]),t._v(" "),s("td",[t._v("Map from "),s("code",[t._v("id")]),t._v(" to "),s("code",[t._v("GenricModel")]),t._v(" (whereas id is: "),s("code",[t._v("/example/<id>")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$readyAll")])]),t._v(" "),s("td",[t._v("Boolean")]),t._v(" "),s("td",[t._v("Becomes "),s("code",[t._v("true")]),t._v(" when "),s("em",[t._v("all")]),t._v(" children are ready (downloaded)")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$readySome")])]),t._v(" "),s("td",[t._v("Boolean")]),t._v(" "),s("td",[t._v("Becomes "),s("code",[t._v("true")]),t._v(" when "),s("em",[t._v("some")]),t._v(" children are ready (downloaded)")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$promise")])]),t._v(" "),s("td",[t._v("Promise")]),t._v(" "),s("td",[t._v("A promise that will resolve, when $readyAll is "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$numReady")])]),t._v(" "),s("td",[t._v("Numeric")]),t._v(" "),s("td",[t._v("Number of children that are ready (downloaded)")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$numChildren")])]),t._v(" "),s("td",[t._v("Numeric")]),t._v(" "),s("td",[t._v("Number of children")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$noaccess")])]),t._v(" "),s("td",[t._v("Boolean")]),t._v(" "),s("td",[t._v("Did the user have permission")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$idList")])]),t._v(" "),s("td",[t._v("Array")]),t._v(" "),s("td",[t._v("List of all child id's (whereas id is: "),s("code",[t._v("/example/<id>")]),t._v(")")])])])]),t._v(" "),s("p",[t._v("GenericList's also provide some basic filter and sort functions, that return a array instead of an object. When data children are returned as array the "),s("code",[t._v("id")]),t._v(" can still be accessed through "),s("code",[t._v("items[0].$id")]),t._v(".")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Array helper functions")]),t._v(" "),s("th",[t._v("Returns "),s("code",[t._v(".items")]),t._v(" as array...")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("asArraySorted()")])]),t._v(" "),s("td",[t._v("... and sorted by the field "),s("code",[t._v("sortidx")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("asArraySortedBy(prop)")])]),t._v(" "),s("td",[t._v("... and sorted by "),s("code",[t._v("<prop>")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("asArrayFilteredBy(prop, value)")])]),t._v(" "),s("td",[t._v("... and filtered by "),s("code",[t._v("<prop> == value")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("itemsAsArrayWithoutDeleted()")])]),t._v(" "),s("td",[t._v("... but without deleted (field "),s("code",[t._v("deleted")]),t._v(" is false)")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("itemsAsArrayOnlyDeleted()")])]),t._v(" "),s("td",[t._v("... but only deleted")])])])]),t._v(" "),s("p",[t._v("Keep in mind theat these functions filter data "),s("strong",[t._v("locally")]),t._v(". If you want to filter\nor order data on the server side considere using a query.")]),t._v(" "),s("h2",{attrs:{id:"working-with-queries"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-queries"}},[t._v("#")]),t._v(" Working with queries")]),t._v(" "),s("p",[t._v("The basic syntax for "),s("code",[t._v("subscribeQuery")]),t._v(" is the same as "),s("code",[t._v("subscribeList")]),t._v(", but it takes\nan additional argument "),s("code",[t._v("query")]),t._v(" which is an object:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeQuery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returs 'GenricList'")]),t._v("\n")])])]),s("p",[t._v("For example, if you want to get all tasks, that were created after timestamp "),s("code",[t._v("123456789")]),t._v("\nand limit the result to "),s("code",[t._v("100")]),t._v(" children you could run the following query:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeQuery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'createdAt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  startAt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456789")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  limit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("The properties of "),s("code",[t._v("query")]),t._v(" are mapped to native Firebase functions like this:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("heliosRX")]),t._v(" "),s("th",[t._v("Firebase")]),t._v(" "),s("th",[t._v("Comment")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("no key")])]),t._v(" "),s("td",[s("code",[t._v("orderByKey()")])]),t._v(" "),s("td",[t._v("No index needed. Key is always indexed")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("{ key: '*' }")])]),t._v(" "),s("td",[s("code",[t._v("orderByValue()")])]),t._v(" "),s("td",[t._v("[1]")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("{ key: <key> }")])]),t._v(" "),s("td",[s("code",[t._v("orderByChild(<key>)")])]),t._v(" "),s("td",[t._v("[2]")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("{ value: <value> }")])]),t._v(" "),s("td",[s("code",[t._v("equalTo(<value>)")])]),t._v(" "),s("td",[t._v("Depends on the order-by method chosen")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("{ startAt: <start> }")])]),t._v(" "),s("td",[s("code",[t._v("startAt(<start>)")])]),t._v(" "),s("td",[t._v("Read "),s("a",{attrs:{href:"https://firebase.google.com/docs/database/web/lists-of-data#data-order",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1),t._v(" on data ordering")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("{ endAt: <end> }")])]),t._v(" "),s("td",[s("code",[t._v("endAt(<end>)")])]),t._v(" "),s("td",[t._v("-")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("{ limit: 100 }")])]),t._v(" "),s("td",[s("code",[t._v("limitToFirst(100)")])]),t._v(" "),s("td",[t._v("-")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("{ limit: -100 }")])]),t._v(" "),s("td",[s("code",[t._v("limitToLast(100)")])]),t._v(" "),s("td",[t._v("-")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("-")])]),t._v(" "),s("td",[s("code",[t._v("orderByPriority()")])]),t._v(" "),s("td",[s("em",[t._v("Not available")])])])])]),t._v(" "),s("ul",[s("li",[t._v("[1] "),s("code",[t._v("orderByValue")]),t._v(": Don't forget to add "),s("code",[t._v("indexOn( [ '.value' ] )")])]),t._v(" "),s("li",[t._v("[2] "),s("code",[t._v("orderByChild")]),t._v(": Don't forget to add "),s("code",[t._v("indexOn( [ <key> ] )")])])]),t._v(" "),s("p",[t._v("For more information please read the Firebase Docs:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data",target:"_blank",rel:"noopener noreferrer"}},[t._v("Work with Lists of Data on the Web"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://firebase.google.com/docs/reference/js/firebase.database.Query",target:"_blank",rel:"noopener noreferrer"}},[t._v("firebase.database.Query"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"working-with-single-nodes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#working-with-single-nodes"}},[t._v("#")]),t._v(" Working with single nodes")]),t._v(" "),s("p",[t._v("Nodes can be retrieved in the same way as lists, but an "),s("code",[t._v("id")]),t._v(" has to be provided:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    taskId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" required"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taskId "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  watch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'task.$ready'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// task is ready")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Also a task instance can be created in one of the lifecycle hooks. This is especially\nuseful if the component is responsible for writing data (like modals or forms):")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      taskId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" task "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeNode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taskId "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" task"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// task is ready")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("methods")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("code",[t._v("GenericModels")]),t._v(" will have autogenerated props that wrap around the actual state ("),s("code",[t._v("$state")]),t._v(").\nFor example the following schema")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fields"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    title"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'String'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    createdAt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ServerTimestamp'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    isDone"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Boolean'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("will produce the following auto-generated getters and setters:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Properties")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("title")])]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("Title (getter/setter for "),s("code",[t._v("$state.title")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("createdAt")])]),t._v(" "),s("td",[t._v("moment")]),t._v(" "),s("td",[t._v("Converted to "),s("a",{attrs:{href:"https://momentjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("moment.js"),s("OutboundLink")],1),t._v(" object")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("isDone")])]),t._v(" "),s("td",[t._v("Boolean")]),t._v(" "),s("td",[t._v("isDone (getter/setter for "),s("code",[t._v("$state.isDone")]),t._v(")")])])])]),t._v(" "),s("p",[t._v("Some other useful properties from "),s("code",[t._v("GenericModel")]),t._v(" taht you can use are:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Properties")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("$id")])]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[s("code",[t._v("id")]),t._v(" of the node (whereas id is: "),s("code",[t._v("/example/<id>")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$idx")])]),t._v(" "),s("td",[t._v("Numeric")]),t._v(" "),s("td",[t._v("A numeric index of the node if node is child element of a list")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$key")])]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("A unique key that can be used with "),s("code",[t._v("v-for")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$ready")])]),t._v(" "),s("td",[t._v("Boolean")]),t._v(" "),s("td",[t._v("Boolean that becomes "),s("code",[t._v("true")]),t._v(" when node is ready (downloaded)")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$promise")])]),t._v(" "),s("td",[t._v("Promise")]),t._v(" "),s("td",[t._v("A promise that will resolve, when $ready is "),s("code",[t._v("true")])])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$state")])]),t._v(" "),s("td",[t._v("Object")]),t._v(" "),s("td",[t._v("The raw state")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$dirty")])]),t._v(" "),s("td",[t._v("Object")]),t._v(" "),s("td",[t._v("Object of fields that have been changed but not saved")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$invalid")])]),t._v(" "),s("td",[t._v("Object")]),t._v(" "),s("td",[t._v("Object of fields that are invalid")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$isValid")])]),t._v(" "),s("td",[t._v("Boolean")]),t._v(" "),s("td",[t._v("Whether the current state is valid (all props are valid) or not")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("$exists")])]),t._v(" "),s("td",[t._v("Boolean")]),t._v(" "),s("td",[t._v("Whether the node existed in the database or not")])])])]),t._v(" "),s("p",[t._v("Finally data can be written to the database with these methods:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Methods")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("clone()")])]),t._v(" "),s("td",[t._v("Required when data is changed locally. Creates a clone of the GenericModel.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("write()")])]),t._v(" "),s("td",[t._v("Write dirty fields to database (usually requires "),s("code",[t._v("clone()")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("update()")])]),t._v(" "),s("td",[t._v("Directly update fields in the database. Syntax:"),s("br"),s("code",[t._v("task.update(id, { isDone: true })")])])])])])])}),[],!1,null,null,null);e.default=n.exports}}]);
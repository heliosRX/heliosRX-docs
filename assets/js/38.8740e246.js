(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{207:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"retrieving-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#retrieving-data"}},[t._v("#")]),t._v(" Retrieving data")]),t._v(" "),e("p",[t._v("There is two ways to retrieve data in heliosRX (and Firebase). Either as a\ncontiouns stream of data ("),e("code",[t._v("subscribe")]),t._v(") or as one time event ("),e("code",[t._v("fetch")]),t._v(").\nIn the first case data will continously be synced from Realtime Database.\nIn the second case data is only retrieved once and not synced any further.")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th",[t._v("sync")]),t._v(" "),e("th",[t._v("fetch (same syntax)")]),t._v(" "),e("th",[e("em",[t._v("return type")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("list (collection)")]),t._v(" "),e("td",[e("code",[t._v("subscribeList")])]),t._v(" "),e("td",[e("code",[t._v("fetchList")])]),t._v(" "),e("td",[e("em",[e("code",[t._v("GenericList")])])])]),t._v(" "),e("tr",[e("td",[t._v("filtered list")]),t._v(" "),e("td",[e("code",[t._v("subscribeQuery")])]),t._v(" "),e("td",[e("code",[t._v("fetchQuery")])]),t._v(" "),e("td",[e("em",[e("code",[t._v("GenericList")])])])]),t._v(" "),e("tr",[e("td",[t._v("node (document)")]),t._v(" "),e("td",[e("code",[t._v("subscribeNode")])]),t._v(" "),e("td",[e("code",[t._v("fetchNode")])]),t._v(" "),e("td",[e("em",[e("code",[t._v("GenericModel")])])])])])]),t._v(" "),e("p",[t._v("Both subscribe and fetch exists for nodes (or documents) and lists (or collections)\nof data. A special case of a list is a query. A query returns a list that\nhas been filtered on the server according to certain criteria")]),t._v(" "),e("p",[t._v("While "),e("code",[t._v("subscribeList")]),t._v(" will return everything under the node "),e("code",[t._v("tasks")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("/tasks/*  --\x3e  $models.task.subscribeList()\n")])])]),e("p",[e("code",[t._v("subscribeNode")]),t._v(" will only return one item:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("/tasks/1  --\x3e  $models.task.subscribeNode(1)\n")])])]),t._v(" "),e("p",[e("code",[t._v("fetchList")]),t._v(" and "),e("code",[t._v("subscribeList")]),t._v(", "),e("code",[t._v("fetchQuery")]),t._v(" and "),e("code",[t._v("subscribeQuery")]),t._v(", "),e("code",[t._v("fetchNode")]),t._v(" and "),e("code",[t._v("subscribeNode")]),t._v(" have identical syntax and can be used interchangeably.")]),t._v(" "),e("h2",{attrs:{id:"working-with-lists"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#working-with-lists"}},[t._v("#")]),t._v(" Working with lists")]),t._v(" "),e("p",[t._v("One way to retrieve data is to define a new variable in the "),e("code",[t._v("this")]),t._v(" scope, during\nthe "),e("code",[t._v("created")]),t._v(" or "),e("code",[t._v("mounted")]),t._v(" lifecycle hooks:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" task_list "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeList")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_list "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" task_list"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_list"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$promise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// all tasks have been loaded")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("There is no need to define "),e("code",[t._v("task_list")]),t._v(" in "),e("code",[t._v("data()")]),t._v(" in order to make it reactive.\nReturn values of "),e("code",[t._v("subscribeNode")]),t._v(" / "),e("code",[t._v("subscribeList")]),t._v(" / "),e("code",[t._v("subscribeQuery")]),t._v(" are always reactive by themselves.")]),t._v(" "),e("p",[t._v("Another way is to return a "),e("code",[t._v("GenericList")]),t._v(" directly from a computed property:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("  computed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("task_list")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeList")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("In both cases "),e("code",[t._v("task_list")]),t._v(" will be available in the template:")]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("task_list.$readyAll"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {{task_list.items}}\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[t._v("Some other useful properties you can use at this moment are:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Properties")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v(".items")])]),t._v(" "),e("td",[t._v("Object")]),t._v(" "),e("td",[t._v("Map from "),e("code",[t._v("id")]),t._v(" to "),e("code",[t._v("GenricModel")]),t._v(" (whereas id is: "),e("code",[t._v("/example/<id>")]),t._v(")")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$readyAll")])]),t._v(" "),e("td",[t._v("Boolean")]),t._v(" "),e("td",[t._v("Becomes "),e("code",[t._v("true")]),t._v(" when "),e("em",[t._v("all")]),t._v(" children are ready (downloaded)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$readySome")])]),t._v(" "),e("td",[t._v("Boolean")]),t._v(" "),e("td",[t._v("Becomes "),e("code",[t._v("true")]),t._v(" when "),e("em",[t._v("some")]),t._v(" children are ready (downloaded)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$promise")])]),t._v(" "),e("td",[t._v("Promise")]),t._v(" "),e("td",[t._v("A promise that will resolve, when $readyAll is "),e("code",[t._v("true")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$numReady")])]),t._v(" "),e("td",[t._v("Numeric")]),t._v(" "),e("td",[t._v("Number of children that are ready (downloaded)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$numChildren")])]),t._v(" "),e("td",[t._v("Numeric")]),t._v(" "),e("td",[t._v("Number of children")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$noaccess")])]),t._v(" "),e("td",[t._v("Boolean")]),t._v(" "),e("td",[t._v("Did the user have permission")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$idList")])]),t._v(" "),e("td",[t._v("Array")]),t._v(" "),e("td",[t._v("List of all child id's (whereas id is: "),e("code",[t._v("/example/<id>")]),t._v(")")])])])]),t._v(" "),e("p",[t._v("GenericList's also provide some basic filter and sort functions, that return a array instead of an object. When data children are returned as array the "),e("code",[t._v("id")]),t._v(" can still be accessed through "),e("code",[t._v("items[0].$id")]),t._v(".")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Array helper functions")]),t._v(" "),e("th",[t._v("Returns "),e("code",[t._v(".items")]),t._v(" as array...")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("asArraySorted()")])]),t._v(" "),e("td",[t._v("... and sorted by the field "),e("code",[t._v("sortidx")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("asArraySortedBy(prop)")])]),t._v(" "),e("td",[t._v("... and sorted by "),e("code",[t._v("<prop>")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("asArrayFilteredBy(prop, value)")])]),t._v(" "),e("td",[t._v("... and filtered by "),e("code",[t._v("<prop> == value")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("itemsAsArrayWithoutDeleted()")])]),t._v(" "),e("td",[t._v("... but without deleted (field "),e("code",[t._v("deleted")]),t._v(" is false)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("itemsAsArrayOnlyDeleted()")])]),t._v(" "),e("td",[t._v("... but only deleted")])])])]),t._v(" "),e("p",[t._v("Keep in mind theat these functions filter data "),e("strong",[t._v("locally")]),t._v(". If you want to filter\nor order data on the server side considere using a query.")]),t._v(" "),e("h2",{attrs:{id:"working-with-queries"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#working-with-queries"}},[t._v("#")]),t._v(" Working with queries")]),t._v(" "),e("p",[t._v("The basic syntax for "),e("code",[t._v("subscribeQuery")]),t._v(" is the same as "),e("code",[t._v("subscribeList")]),t._v(", but it takes\nan additional argument "),e("code",[t._v("query")]),t._v(" which is an object:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" list "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeQuery")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("query"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returs 'GenricList'")]),t._v("\n")])])]),e("p",[t._v("For example, if you want to get all tasks, that were created after timestamp "),e("code",[t._v("123456789")]),t._v("\nand limit the result to "),e("code",[t._v("100")]),t._v(" children you could run the following query:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeQuery")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'createdAt'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  startAt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456789")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  limit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("The properties of "),e("code",[t._v("query")]),t._v(" are mapped to native Firebase functions like this:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("heliosRX")]),t._v(" "),e("th",[t._v("Firebase")]),t._v(" "),e("th",[t._v("Comment")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("no key")])]),t._v(" "),e("td",[e("code",[t._v("orderByKey()")])]),t._v(" "),e("td",[t._v("No index needed. Key is always indexed")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("{ key: '*' }")])]),t._v(" "),e("td",[e("code",[t._v("orderByValue()")])]),t._v(" "),e("td",[t._v("[1]")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("{ key: <key> }")])]),t._v(" "),e("td",[e("code",[t._v("orderByChild(<key>)")])]),t._v(" "),e("td",[t._v("[2]")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("{ value: <value> }")])]),t._v(" "),e("td",[e("code",[t._v("equalTo(<value>)")])]),t._v(" "),e("td",[t._v("Depends on the order-by method chosen")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("{ startAt: <start> }")])]),t._v(" "),e("td",[e("code",[t._v("startAt(<start>)")])]),t._v(" "),e("td",[t._v("Read "),e("a",{attrs:{href:"https://firebase.google.com/docs/database/web/lists-of-data#data-order",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),e("OutboundLink")],1),t._v(" on data ordering")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("{ endAt: <end> }")])]),t._v(" "),e("td",[e("code",[t._v("endAt(<end>)")])]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("{ limit: 100 }")])]),t._v(" "),e("td",[e("code",[t._v("limitToFirst(100)")])]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("{ limit: -100 }")])]),t._v(" "),e("td",[e("code",[t._v("limitToLast(100)")])]),t._v(" "),e("td",[t._v("-")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("-")])]),t._v(" "),e("td",[e("code",[t._v("orderByPriority()")])]),t._v(" "),e("td",[e("em",[t._v("Not available")])])])])]),t._v(" "),e("ul",[e("li",[t._v("[1] "),e("code",[t._v("orderByValue")]),t._v(": Don't forget to add "),e("code",[t._v("indexOn( [ '.value' ] )")])]),t._v(" "),e("li",[t._v("[2] "),e("code",[t._v("orderByChild")]),t._v(": Don't forget to add "),e("code",[t._v("indexOn( [ <key> ] )")])])]),t._v(" "),e("p",[t._v("For more information please read the Firebase Docs:")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data",target:"_blank",rel:"noopener noreferrer"}},[t._v("Work with Lists of Data on the Web"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://firebase.google.com/docs/reference/js/firebase.database.Query",target:"_blank",rel:"noopener noreferrer"}},[t._v("firebase.database.Query"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"working-with-single-nodes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#working-with-single-nodes"}},[t._v("#")]),t._v(" Working with single nodes")]),t._v(" "),e("p",[t._v("Nodes can be retrieved in the same way as lists, but an "),e("code",[t._v("id")]),t._v(" has to be provided:")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  props"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    taskId"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" required"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeNode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taskId "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  watch"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'task.$ready'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// task is ready")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Also a task instance can be created in one of the lifecycle hooks. This is especially\nuseful if the component is responsible for writing data (like modals or forms):")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      taskId"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" task "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeNode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("taskId "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("clone")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_list"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$promise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// task is ready")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("methods")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("task_list"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[e("code",[t._v("GenericModels")]),t._v(" will have autogenerated props that wrap around the actual state ("),e("code",[t._v("$state")]),t._v(").\nFor example the following schema")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fields"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    title"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'String'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" required"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    createdAt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ServerTimestamp'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    isDone"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Boolean'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("will produce the following auto-generated getters and setters:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Properties")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("title")])]),t._v(" "),e("td",[t._v("String")]),t._v(" "),e("td",[t._v("Title (getter/setter for "),e("code",[t._v("$state.title")]),t._v(")")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("createdAt")])]),t._v(" "),e("td",[t._v("moment")]),t._v(" "),e("td",[t._v("Converted to "),e("a",{attrs:{href:"https://momentjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("moment.js"),e("OutboundLink")],1),t._v(" object")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("isDone")])]),t._v(" "),e("td",[t._v("Boolean")]),t._v(" "),e("td",[t._v("isDone (getter/setter for "),e("code",[t._v("$state.isDone")]),t._v(")")])])])]),t._v(" "),e("p",[t._v("Some other useful properties from "),e("code",[t._v("GenericModel")]),t._v(" taht you can use are:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Properties")]),t._v(" "),e("th",[t._v("Type")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("$id")])]),t._v(" "),e("td",[t._v("String")]),t._v(" "),e("td",[e("code",[t._v("id")]),t._v(" of the node (whereas id is: "),e("code",[t._v("/example/<id>")]),t._v(")")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$idx")])]),t._v(" "),e("td",[t._v("Numeric")]),t._v(" "),e("td",[t._v("A numeric index of the node if node is child element of a list")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$key")])]),t._v(" "),e("td",[t._v("String")]),t._v(" "),e("td",[t._v("A unique key that can be used with "),e("code",[t._v("v-for")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$ready")])]),t._v(" "),e("td",[t._v("Boolean")]),t._v(" "),e("td",[t._v("Boolean that becomes "),e("code",[t._v("true")]),t._v(" when node is ready (downloaded)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$promise")])]),t._v(" "),e("td",[t._v("Promise")]),t._v(" "),e("td",[t._v("A promise that will resolve, when $ready is "),e("code",[t._v("true")])])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$state")])]),t._v(" "),e("td",[t._v("Object")]),t._v(" "),e("td",[t._v("The raw state")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$dirty")])]),t._v(" "),e("td",[t._v("Object")]),t._v(" "),e("td",[t._v("Object of fields that have been changed but not saved")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$invalid")])]),t._v(" "),e("td",[t._v("Object")]),t._v(" "),e("td",[t._v("Object of fields that are invalid")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$isValid")])]),t._v(" "),e("td",[t._v("Boolean")]),t._v(" "),e("td",[t._v("Whether the current state is valid (all props are valid) or not")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("$exists")])]),t._v(" "),e("td",[t._v("Boolean")]),t._v(" "),e("td",[t._v("Whether the node existed in the database or not")])])])]),t._v(" "),e("p",[t._v("Finally data can be written to the database with these methods:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Methods")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("clone()")])]),t._v(" "),e("td",[t._v("Required when data is changed locally. Creates a clone of the GenericModel.")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("write()")])]),t._v(" "),e("td",[t._v("Write dirty fields to database (usually requires "),e("code",[t._v("clone()")]),t._v(")")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("update()")])]),t._v(" "),e("td",[t._v("Directly update fields in the database. Syntax:"),e("br"),e("code",[t._v("task.update(id, { isDone: true })")])])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Defining a Model | heliosRX (v0.2.1)</title>
    <meta name="description" content="Examples of useful vuepress code">
    <link rel="icon" href="/logo-small.png">
    
    <link rel="preload" href="/assets/css/0.styles.8ab8f5b5.css" as="style"><link rel="preload" href="/assets/js/app.0e0cfda1.js" as="script"><link rel="preload" href="/assets/js/2.966b6269.js" as="script"><link rel="preload" href="/assets/js/28.acae1698.js" as="script"><link rel="prefetch" href="/assets/js/10.68ebee34.js"><link rel="prefetch" href="/assets/js/11.c33e2463.js"><link rel="prefetch" href="/assets/js/12.bdbea8f4.js"><link rel="prefetch" href="/assets/js/13.5f7b540c.js"><link rel="prefetch" href="/assets/js/14.2063524f.js"><link rel="prefetch" href="/assets/js/15.c38f61d4.js"><link rel="prefetch" href="/assets/js/16.8e83ec1a.js"><link rel="prefetch" href="/assets/js/17.4345f684.js"><link rel="prefetch" href="/assets/js/18.f3c39895.js"><link rel="prefetch" href="/assets/js/19.a12680c1.js"><link rel="prefetch" href="/assets/js/20.958fb565.js"><link rel="prefetch" href="/assets/js/21.bac925e4.js"><link rel="prefetch" href="/assets/js/22.aca57d2c.js"><link rel="prefetch" href="/assets/js/23.91b7bed9.js"><link rel="prefetch" href="/assets/js/24.c152bc98.js"><link rel="prefetch" href="/assets/js/25.01f57b4e.js"><link rel="prefetch" href="/assets/js/26.cd5f0d0a.js"><link rel="prefetch" href="/assets/js/27.fe0538f7.js"><link rel="prefetch" href="/assets/js/29.bff35ce6.js"><link rel="prefetch" href="/assets/js/3.1f8eeeab.js"><link rel="prefetch" href="/assets/js/30.925ce862.js"><link rel="prefetch" href="/assets/js/31.7eb01a1f.js"><link rel="prefetch" href="/assets/js/32.ab44ace2.js"><link rel="prefetch" href="/assets/js/33.0c1f21a4.js"><link rel="prefetch" href="/assets/js/34.b32accd1.js"><link rel="prefetch" href="/assets/js/35.28fb5152.js"><link rel="prefetch" href="/assets/js/36.f864bb18.js"><link rel="prefetch" href="/assets/js/37.496aa8fd.js"><link rel="prefetch" href="/assets/js/38.9addab41.js"><link rel="prefetch" href="/assets/js/39.18a418f8.js"><link rel="prefetch" href="/assets/js/4.77d83842.js"><link rel="prefetch" href="/assets/js/40.2dd43dcd.js"><link rel="prefetch" href="/assets/js/41.d8b98aa5.js"><link rel="prefetch" href="/assets/js/42.c23f3380.js"><link rel="prefetch" href="/assets/js/43.5ba3f141.js"><link rel="prefetch" href="/assets/js/44.70df77bd.js"><link rel="prefetch" href="/assets/js/5.7602ba61.js"><link rel="prefetch" href="/assets/js/6.f0530b27.js"><link rel="prefetch" href="/assets/js/7.f37f7752.js"><link rel="prefetch" href="/assets/js/8.bab95a10.js"><link rel="prefetch" href="/assets/js/9.f5b2cebf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ab8f5b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo-small.png" alt="heliosRX (v0.2.1)" class="logo"> <span class="site-name can-hide">heliosRX (v0.2.1)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/01-intro.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/tips/01-designing-good-security-rules.html" class="nav-link">Tips</a></div> <a href="https://github.com/heliosRX/heliosRX" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/01-intro.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/api/" class="nav-link">API</a></div><div class="nav-item"><a href="/tips/01-designing-good-security-rules.html" class="nav-link">Tips</a></div> <a href="https://github.com/heliosRX/heliosRX" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/01-intro.html" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/01-intro.html#what-is-heliosrx" class="sidebar-link">What is heliosRX?</a></li><li class="sidebar-sub-header"><a href="/guide/01-intro.html#when-should-i-use-heliosrx" class="sidebar-link">When should I use heliosRX?</a></li><li class="sidebar-sub-header"><a href="/guide/01-intro.html#how-it-works" class="sidebar-link">How it works</a></li></ul></li><li><a href="/guide/02-installation.html" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide/03-configuration.html" class="sidebar-link">Configuration</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide/04-example-project.html" class="sidebar-link">Example Project</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Basic usage</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/basics/01-5-minute-intro.html" class="sidebar-link">Quick Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/basics/01-5-minute-intro.html#step-1-create-a-model" class="sidebar-link">Step 1: Create a Model</a></li><li class="sidebar-sub-header"><a href="/guide/basics/01-5-minute-intro.html#step-2-subscribe-to-data" class="sidebar-link">Step 2: Subscribe to data</a></li><li class="sidebar-sub-header"><a href="/guide/basics/01-5-minute-intro.html#step-3-write-data" class="sidebar-link">Step 3: Write data</a></li></ul></li><li><a href="/guide/basics/02-cheat-sheet.html" class="sidebar-link">Cheat sheet</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tutorials</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/tutorial/01-schema-definition.html" class="active sidebar-link">Defining a Model</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/tutorial/01-schema-definition.html#create-a-new-model" class="sidebar-link">Create a new model</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial/01-schema-definition.html#defining-a-new-store-and-setting-the-path-template" class="sidebar-link">Defining a new Store and setting the Path Template</a></li><li class="sidebar-sub-header"><a href="/guide/tutorial/01-schema-definition.html#generate-and-deploy-security-rules" class="sidebar-link">Generate and deploy security rules</a></li></ul></li><li><a href="/guide/tutorial/02-nested-data.html" class="sidebar-link">Dealing with nested data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/tutorial/02-nested-data.html#setting-the-default-user-id" class="sidebar-link">Setting the default user Id</a></li></ul></li><li><a href="/guide/tutorial/03-fetch-and-subscribe.html" class="sidebar-link">Retrieving data</a></li><li><a href="/guide/tutorial/04-updating-data.html" class="sidebar-link">Writing data</a></li><li><a href="/guide/tutorial/05-sorting-lists.html" class="sidebar-link">Working with sortable lists</a></li><li><a href="/guide/tutorial/06-custom-getters-and-actions.html" class="sidebar-link">Custom getters &amp; actions</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide/tutorial/07-ready-flags.html" class="sidebar-link">Ready flags</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/advanced/09-internals.html" class="sidebar-link">How heliosRX works</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="defining-a-model"><a href="#defining-a-model" class="header-anchor">#</a> Defining a Model</h1> <p>Models are defined by a schema, getters, and actions. While the schema describes
which fields the model has, which type they have, if they're required or not,
actions and getters are optional extensions of the model's capabilities.
You may define as many models as your application requires.</p> <p>To define a model, you have to do the following steps:</p> <ol><li>Create <code>schema.js</code> in <code>src/models</code> which exports a model definition</li> <li>Create a <code>GenericStore</code> from the model definition in <code>src/models/config.js</code></li> <li>Update <code>rules.bolt</code> to grant access to the path, where the data is stored</li> <li>Generate and deploy security rules
</li></ol> <h2 id="create-a-new-model"><a href="#create-a-new-model" class="header-anchor">#</a> Create a new model</h2> <p>There are two ways to create a new model:</p> <h3 id="automatically-creating-a-new-model"><a href="#automatically-creating-a-new-model" class="header-anchor">#</a> Automatically creating a new model</h3> <p>First, create a new model with the CLI tool</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helios gen-model <span class="token operator">&lt;</span>mymodel<span class="token operator">&gt;</span>
</code></pre></div><p>next edit <code>src/models/&lt;mymodel&gt;/schema.js</code>.</p> <h3 id="manually-creating-a-new-model"><a href="#manually-creating-a-new-model" class="header-anchor">#</a> Manually creating a new model</h3> <p>First, create a new folder for the model definition:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> -p src/models/example/
</code></pre></div><p>Then add an <code>index.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// file: src/models/example/index.js</span>
<span class="token keyword">import</span> schema <span class="token keyword">from</span> <span class="token string">'./schema'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  staticGetters<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token comment">// Define global getters for the store</span>
  staticActions<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token comment">// Define global actions for the store</span>
  schema<span class="token punctuation">:</span> schema<span class="token punctuation">,</span>      <span class="token comment">// Define model schema</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Then create a <code>schema.js</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// file: src/model/example/schema.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      createdAt<span class="token punctuation">:</span> <span class="token constant">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      title<span class="token punctuation">:</span> <span class="token string">&quot;Undefined title&quot;</span> <span class="token operator">||</span> title<span class="token punctuation">,</span>
      isDone<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  fields<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    createdAt<span class="token punctuation">:</span> <span class="token punctuation">{</span> validate_bolt_type<span class="token punctuation">:</span> <span class="token string">'ServerTimestamp'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    title<span class="token punctuation">:</span>     <span class="token punctuation">{</span> validate_bolt_type<span class="token punctuation">:</span> <span class="token string">'String'</span><span class="token punctuation">,</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    isDone<span class="token punctuation">:</span>    <span class="token punctuation">{</span> validate_bolt_type<span class="token punctuation">:</span> <span class="token string">'Boolean'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="defining-a-new-store-and-setting-the-path-template"><a href="#defining-a-new-store-and-setting-the-path-template" class="header-anchor">#</a> Defining a new Store and setting the Path Template</h2> <p>Create a new store in you <code>config.js</code>, like so:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> exampleModelDefinition <span class="token keyword">from</span>  <span class="token string">'@/models/example'</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> challenge <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericStore</span><span class="token punctuation">(</span>
  <span class="token string">'[DB1]:/user/{userId}/challenge/*'</span><span class="token punctuation">,</span>
  exampleModelDefinition<span class="token punctuation">,</span>
  options
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The first argument is the path where the schema is mapped to. <code>{userId}</code> is a
placeholder which can be set with <code>with({ userId: ... })</code>.
The asterisk <code>*</code> is a placeholder for the <strong>primary key</strong>.
<code>[DB1]:</code> is optional and can be used for database sharding.
If only one database is configured, it can be omitted,
otherwise, it refers to the identifier of the database as
configured when setting up heliosRX with <code>Vue.use(heliosRX, { ... })</code>.</p> <p>The second argument is the model definition as defined in the previous section.</p> <p>The third argument is an options object. Valid options are <code>isAbstract</code> or
<code>additionalProps</code>, see <a href="../../api/01-generic-store">API GenericStore</a>.</p> <h2 id="generate-and-deploy-security-rules"><a href="#generate-and-deploy-security-rules" class="header-anchor">#</a> Generate and deploy security rules</h2> <p>Verify everything is set up correctly with:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>helios check
</code></pre></div><p>then run:</p> <div class="language-js extra-class"><pre class="language-js"><code>helios rules <span class="token operator">--</span>write database<span class="token punctuation">.</span>rules<span class="token punctuation">.</span>bolt
firebase<span class="token operator">-</span>bolt database<span class="token punctuation">.</span>rules<span class="token punctuation">.</span>bolt
firebase deploy <span class="token operator">--</span>only database
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/basics/02-cheat-sheet.html" class="prev">Cheat sheet</a></span> <span class="next"><a href="/guide/tutorial/02-nested-data.html">Dealing with nested data</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0e0cfda1.js" defer></script><script src="/assets/js/2.966b6269.js" defer></script><script src="/assets/js/28.acae1698.js" defer></script>
  </body>
</html>
